<!-- app/views/chats/index.html.erb -->

<h1>Chats</h1>

<h2>Chat with <%= @user.name %></h2>

<ul>
  <% @chats.each do |chat| %>
    <li>
      <%= chat.sender.name %>: <%= chat.message %>
    </li>
  <% end %>
</ul>

<h3>Send a Message:</h3>
<%= render 'layouts/errors', obj: @chat  %>
<%= form_with(model: @chat , url: chats_path, method: :post) do |form| %>
  <%= form.hidden_field :sender_id, value: @user.id %>
  <%= form.hidden_field :receiver_id, value:  @receiver_id %>
  <%= form.text_field :message %>
  <%= form.submit 'Send' %>
<% end %>
